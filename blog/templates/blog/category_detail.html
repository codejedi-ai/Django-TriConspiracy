{% extends 'blog/base.html' %}

{% block title %}{{ category.name }} - Category{% endblock %}

{% block content %}
  <div class="row">
    <div class="col s12">
      <h4>{{ category.name }}</h4>
      {% if category.description %}
        <p>{{ category.description }}</p>
      {% endif %}
      <a href="{% url 'blog:post_list' %}" class="btn-flat">
        <i class="material-icons left">arrow_back</i>All Posts
      </a>
    </div>
  </div>
  
  <div class="row">
    <div class="col s12">
      {% for post in posts %}
        <div class="card post-card">
          <div class="card-content">
            <span class="card-title">
              <a href="{% url 'blog:post_detail' post.slug %}">{{ post.title }}</a>
            </span>
            <div class="post-meta">
              <i class="material-icons tiny">person</i> {{ post.author }}
              <i class="material-icons tiny">access_time</i> {{ post.created_at|date:"M d, Y" }}
            </div>
            {% if post.excerpt %}
              <p>{{ post.excerpt }}</p>
            {% else %}
              <p>{{ post.content|truncatewords:30 }}</p>
            {% endif %}
          </div>
          <div class="card-action">
            <a href="{% url 'blog:post_detail' post.slug %}">Read More</a>
          </div>
        </div>
      {% empty %}
        <div class="card">
          <div class="card-content">
            <p>No posts in this category yet.</p>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
{% endblock %}
